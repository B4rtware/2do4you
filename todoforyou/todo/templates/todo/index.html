{% extends "todo/base.html" %}

{% block content %}
<!-- check if todos are already created -->
{% if todos.count != 0 %}
    <!-- Karten Gruppen Beginnen hier -->
    <div class="card-columns">
        {% for todo in todos %}
            <div class="card">
                <div class="card-body">
                    <!-- card body which includes (description, date created, deadline, progress) -->
                    <!-- description -->
                    <p>{{ todo.description }}</p>
                    <div class="row">
                        <!-- date created -->
                        <div class="text-muted small col">
                            created {{ todo.created|date:"d.m.y" }}
                        </div>
                        <!-- deadline -->
                        <div class="text-info text-right small col">deadline
                            <u>{{ todo.deadline|date:"d.m.y" }}</u>
                        </div>
                    </div>

                    <!-- Progress Bar -->
                    <div class="progressbar-container">
                        <div class="progress mx-auto" style="width: 100%">
                            <div class="progress-bar progress-bar-striped" role="progressbar" style="width: {{ todo.progress }}%" aria-valuenow="{{ todo.progress }}"
                                aria-valuemin="0" aria-valuemax="100">{{ todo.progress }}%
                            </div>
                        </div>
                    </div>
                </div>

                <!-- card footer which includes (delete, edit) -->
                <div class="card-footer row no-gutters">
                    <!-- delete button -->
                    <div class="col-6">
                        <form action="{% url 'delete' todo.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="todo_id" value="{{ todo.id }}" />
                            <button type="submit" class="btn btn-danger btn-sm">
                                <span class="oi oi-trash"></span> Delete</button>
                        </form>
                    </div>

                    <!-- edit button -->
                    <div class="col-6">
                        <form action="{% url 'update' todo.id %}">
                            {% csrf_token %}
                            <input type="hidden" name="todo_id" value="{{ todo.id }}" />
                            <button type="submit" class="btn btn-primary float-right btn-sm" onclick="window.location.href='/edit.html'">
                                <span class="oi oi-pencil"></span> Edit</button>
                        </form>
                    </div>

                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
<div class="content-single-card">
    <div class="card" id="single-card">
        <div class="card-header">
            <h1>Oops.</h1>
        </div>
        <div class="card-body">
            currently you have nothing to do :(
        </div>
    </div>
</div>
{% endif %}

{% endblock %}